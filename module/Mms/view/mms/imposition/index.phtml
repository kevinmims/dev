<?php // VIEW - imposition/index.php ?>

<style>
	.btn.active.focus, .btn.active:focus, .btn.focus, .btn.focus:active, .btn:active:focus, .btn:focus {
		outline:none;
	}
	.table > tbody > tr > td, .table > tbody > tr > th, .table > tfoot > tr > td, .table > tfoot > tr > th, .table > thead > tr > td, .table > thead > tr > th {
    	white-space: nowrap;
	}	
	.nav-tabs li.active a, .nav-tabs li.active  a:focus, .nav-tabs  li.active a:hover {
		border-top:3px solid #337ab7;
		font-weight:bold;
		color:#555;
		border-radius:0px;

	}
	a:focus{
		outline:none;
	}  
	a.js-choice { 
		text-align:left;
	}
	a.js-choice .caret { 
		float:right; margin-top:-10px;
	}
	.btn-blue, .btn-blue:focus, .btn-blue:active {
		background: #337ab7;
		color: white;
		outline:none;
	}
	.btn-blue:hover {
		background: #286090;
		color:white;
	}
</style>

<script>
	$(document).ready(function () {
		$('.js-refresh').on('click', function(){
			var $elem = $(this).find('i');
			$elem.addClass('fa-spin');
			setTimeout(function(){
		        $elem.removeClass('fa-spin');
			}, 2000);	
        });
		$('.btn-group').on('click', '.btn', function() {
			$(this).removeClass('btn-default').addClass('btn-blue').siblings().removeClass('btn-blue').addClass('btn-default');
		});

		$(".dropdown-menu li a").click(function(){
			$(this).closest('.dropdown').find('.btn.js-choice').html($(this).find(".js-name").text()+' <span class="caret"></span>');
			//$(".btn:first-child").html($(this).text()+' <span class="caret"></span>');
		});
		
		var data_table_width = 0;
		var data_table_parent_width = 0;
		var draggable_offset = 0;

		//setDraggableWidths();
		
		var delay = (function(){
			var timer = 0;
			return function(callback, ms){
				clearTimeout (timer);
				timer = setTimeout(callback, ms);
			};
		})();

		
		$(window).resize(function() {
			delay(function(){
				// callback
				//setDraggableWidths();
			}, 500);
		});

		//window.onresize = setDraggableWidths;

/*
		function setDraggableWidths(){
			data_table_width = $('.table.draggable').innerWidth();
			data_table_parent_width = $('.table-responsive').innerWidth();
			draggable_offset = (data_table_parent_width - data_table_width);
			console.log('width reset');
			console.log('data_table_width= '+ data_table_width);
			console.log('data_table_parent_width= ' + data_table_parent_width);
			console.log('draggable_offset= ' + draggable_offset);
			$('.draggable').draggable({
			    axis: "x",
			    ccontainment: [draggable_offset, 0, 0, 0]
			});
		}
*/

		// enable horizontal drag scroll
//--------------------------------------------------------------------------------------------
	
	var mouseNotInSortableElement = false,
		drag_div = document.getElementById('sorted_imposition_table'),
		space = window.innerHeight - drag_div.offsetTop ,
		elem_height = $('#sorted_imposition_table').height();

	
	
	$.fn.draggable = function(){
		var lastPosition, position, difference;
		$( $(this).selector ).on("mousedown mouseup mousemove",function(e){
			if($("#sorted_imposition_table").hasClass('no-drag')){
				console.log('has class');
				e.preventDefault();
			} else {
				if ( e.type == "mousedown" ) { console.log('here 1'); mouseNotInSortableElement = true, lastPosition = [e.clientX, e.clientY];}
				if ( e.type == "mouseup" ) { console.log('here 2'); mouseNotInSortableElement = false, $(this).css("cursor", 'grab'); }
				if ( e.type == "mousemove" && mouseNotInSortableElement == true ){
					console.log('here 3'); 
					$(this).css("cursor", 'grabbing');
					position = [e.clientX, e.clientY];
					difference = [ (position[0]-lastPosition[0]), (position[1]-lastPosition[1]) ];
					$(this).scrollLeft( $(this).scrollLeft() - difference[0] );
					//$(this).scrollTop( $(this).scrollTop() - difference[1] );
					lastPosition = [e.clientX, e.clientY];
				}
			}
			console.log('done');
		});
		$(window).on("mouseup", function(){
			mouseNotInSortableElement = false;
		});
	}

	$("#sorted_imposition_table").draggable();

		
	});
</script>


<section class="">
	<div class="row" style="padding-bottom:10px">
		<div class="col-sm-6" style="">
			<h2 style="margin:0px;padding-top:7px;">
				IMPOSITION <small>dashboard</small><a href="#" class="btn js-refresh"><i class="fa fa-refresh"></i></a>
			</h2>
		</div>

		<div class="col-sm-6 text-right">
			<div class="btn-group" style="padding-bottom:10px;">
				<a class="btn btn-lg btn-default" href="#"><i class="glyphicon glyphicon-arrow-down"></i> Download XML</a>
				<a class="btn btn-lg btn-default" href="#"><i class="glyphicon glyphicon-arrow-up"></i> Upload XML</a>
				<a class="btn btn-lg btn-default" href="#"><i class="glyphicon glyphicon-arrow-up"></i> Upload File</a>
				<a class="btn btn-lg btn-default" href="#"><i class="glyphicon glyphicon-arrow-up"></i> Upload PDF</a>
			</div>
		</div>
	</div>

	<div class="row" style="background: rgba(51, 122, 183, 0.2) none repeat scroll 0px 0px; padding-top: 15px; border-top: 5px solid rgb(51, 122, 183);">
        <div class="col-xs-12 dBtnWrapper btn-group btn-group-justified">
			<a class="btn btn-blue" href="#"><div class="icon">Total Jobs</div><div class="count">74 </div></a>
      		<a class="btn btn-default" href="#"><div class="icon">Due Today</div><div class="count">9 </div></a>
	        <a class="btn btn-default" href="#"><div class="icon">Gangs In Process</div><div class="count">3 </div></a>
	        <a class="btn btn-default" href="#"><div class="icon">Metrix Errors</div><div class="count">0 </div></a>
	        <a class="btn btn-default" href="#"><div class="icon">Gangs Created</div> <div class="count">26 </div></a>
        </div>
	</div>
      
	<div class="row" style="margin-bottom: 15px; padding: 15px 0px 25px; background: rgba(51, 122, 183, 0.2) none repeat scroll 0% 0%; margin-top: 0px;">
		<div class="col-sm-9">
			<div class="row">
				<div class="col-xs-3">
					<div>Location</div>
					<div class="dropdown">
						<a id="dLabel" class="btn btn-default btn-block js-choice" data-target="#" href="http://example.com" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> None <span class="caret"></span>
						</a>

						<ul style="width:100%;" class="dropdown-menu" aria-labelledby="dLabel">
							<li><a class="btn text-left"><span class="badge pull-right js-count">23</span><span class="js-name">Arlington Ave R</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">74</span><span class="js-name">Arlington Ave H</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">34</span><span class="js-name">Van Neyes</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">144</span><span class="js-name">Cleveland</span></a></li>
							<li class="divider"></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">285</span><span class="js-name">All Locations</span></a></li>
						</ul>
					</div>
	            </div>

				<div class="col-xs-3">
					<div>Finish</div>
					<div class="dropdown">
						<a id="dLabel" class="btn btn-default btn-block js-choice" data-target="#" href="http://example.com" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> None  <span class="caret"></span></a>
						<ul style="width:100%;" class="dropdown-menu" aria-labelledby="dLabel">
							<li><a class="btn text-left"><span class="badge pull-right js-count">23</span><span class="js-name">Gloss Aqueous</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">74</span><span class="js-name">Matte Aqueous</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">74</span><span class="js-name">Uncoated</span></a></li>
							<li class="divider"></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">97</span><span class="js-name">All Finishes</span></a></li>
						</ul>
					</div>
				</div>

				<div class="col-xs-3">
					<div>Paper</div>
					<div class="dropdown">
						<a id="dLabel" class="btn btn-default btn-block js-choice" data-target="#" href="http://example.com" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">None <span class="caret"></span></a>
						<ul style="width:100%;" class="dropdown-menu" aria-labelledby="dLabel">
							<li><a class="btn text-left"><span class="badge pull-right js-count">11</span><span class="js-name">100# Text, Gloss Text</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">51</span><span class="js-name">10pt Cover, Gloss 2 Sides</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">78</span><span class="js-name">14pt Cover, Gloss 1 side</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">23</span><span class="js-name">14pt Cover, Gloss 2 side</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">43</span><span class="js-name">14pt Cover, Uncoated</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">60</span><span class="js-name">70# Text, Uncoated</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">60</span><span class="js-name">9x12 Catalog Peal & Seal</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">60</span><span class="js-name">Label, Uncoated White</span></a></li>
							<li class="divider"></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">216</span><span class="js-name">All Paperg</span></a></li>
						</ul>
					</div>
				</div>

				<div class="col-xs-3">
					<div>Quantity</div>
					<div class="dropdown">
						<a id="dLabel" class="btn btn-default btn-block js-choice" data-target="#" href="http://example.com" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> None <span class="caret"></span>
						</a>

						<ul style="width:100%;" class="dropdown-menu" aria-labelledby="dLabel">
							<li><a class="btn text-left"><span class="badge pull-right js-count">23</span><span class="js-name">10 | 4 | $30.00</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">74</span><span class="js-name">250 | 6 | $461.50</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">34</span><span class="js-name">500 | 1 | $17.00</span></a></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">144</span><span class="js-name">4000 | 1 | $131.00</span></a></li>
							<li class="divider"></li>
							<li><a class="btn text-left"><span class="badge pull-right js-count">285</span><span class="js-name">All Quantity</span></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<div class="col-xs-3">
			<div>Due Date <span style="color:red;">*</span></div>
			<div class="dropdown ">
				<a id="dLabel" class="btn btn-default btn-block js-choice" data-target="#" href="http://example.com" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true"> None <span class="caret"></span></a>

				<ul style="width:100%;" class="dropdown-menu" aria-labelledby="dLabel">
					<li><a class="btn text-left"><span class="badge pull-right js-count">12</span><span class="js-name">5/13/16</span></a></li>
					<li><a class="btn text-left"><span class="badge pull-right js-count">41</span><span class="js-name">5/14/16</span></a></li>
					<li><a class="btn text-left"><span class="badge pull-right js-count">38</span><span class="js-name">5/15/16</span></a></li>
					<li><a class="btn text-left"><span class="badge pull-right js-count">17</span><span class="js-name">5/16/16</span></a></li>
					<li class="divider"></li>
					<li><a class="btn text-left"><span class="badge pull-right js-count">97</span><span class="js-name">All Dates</span></a></li>
				</ul>
			</div>
		</div>
	</div>

	<div class="row">
        <div class="col-xs-12">
			<ul class="nav nav-tabs" role="tablist">
				<li role="presentation" class="active"><a aria-expanded="true" href="#data_set" aria-controls="data_set" role="tab" data-toggle="tab">Data Set</a></li>
				<li class="" role="presentation"><a href="#xml_uploads" aria-controls="xml_uploads" role="tab" data-toggle="tab" aria-expanded="false">XML Uploads</a></li>
				<li class="p" role="presentation"><a href="#aws_files" aria-controls="aws_files" role="tab" data-toggle="tab" aria-expanded="false">AWS Files</a></li>
				<li class="t" role="presentation"><a aria-expanded="false" href="#pdf_files" aria-controls="pdf_files" role="tab" data-toggle="tab">PDF Reports</a></li>
			</ul>

			 <div class="tab-content">
			    <div role="tabpanel" class="tab-pane active" id="data_set">
					<div class="table-responsive">
					    <table id="sorted_imposition_table" class="table table-hover draggable">
					      <thead>
					        <tr>
					          <th></th>
					          <th>Job #</th>
					          <th>Est Ship</th>
					          <th>Qty</th>
					          <th>Color</th>
					          <th>Product #</th>
					          <th>Size</th>
					          <th>Total</th>
					          <th>Front Finish</th>
					          <th>Back Finish</th>
					          <th>Custom</th>
					          <th>Binding</th>
					        </tr>
					      </thead>
					      <tbody>
					        <tr>
					          <th scope="row"><input type="checkbox"></th>
					          <td>3jf9729f</td>
					          <td>5/15/16</td>
					          <td>100</td>
					          <td>4/4</td>
					          <td>Brochures</td>
					          <td>8.5"x11.00"</td>
					          <td>$ 72.85</td>
					          <td></td>
					          <td></td>
					          <td>no</td>
					          <td>
					          	<b>Page Size</b>: <span class="Data">8.5"x5.5"</span>
					          	<b class="Label">Page Count</b>: <span class="Data">8 Pages (Cover+4 pages)</span>
					          	<b class="Label">Binding Side</b>: <span class="Data">Left</span>
					          	<b class="Label">Cover Stock</b>: <span class="Data">Same As Inside</span>
					          	<b class="Label">Binding</b>: <span class="Data">Saddle Stitching</span>
					          </td>
					        </tr>
					        <tr>
					          <th scope="row"><input type="checkbox"></th>
					          <td>3jf9729f</td>
					          <td>5/15/16</td>
					          <td>100</td>
					          <td>4/4</td>
					          <td>Brochures</td>
					          <td>8.5"x11.00"</td>
					          <td>$ 72.85</td>
					          <td></td>
					          <td></td>
					          <td>no</td>
					          <td>
					          	<b>Page Size</b>: <span class="Data">8.5"x5.5"</span>
					          	<b class="Label">Page Count</b>: <span class="Data">8 Pages (Cover+4 pages)</span>
					          	<b class="Label">Binding Side</b>: <span class="Data">Left</span>
					          	<b class="Label">Cover Stock</b>: <span class="Data">Same As Inside</span>
					          	<b class="Label">Binding</b>: <span class="Data">Saddle Stitching</span>
					          </td>
					        </tr>
					        <tr>
					          <th scope="row"><input type="checkbox"></th>
					          <td>3jf9729f</td>
					          <td>5/15/16</td>
					          <td>100</td>
					          <td>4/4</td>
					          <td>Brochures</td>
					          <td>8.5"x11.00"</td>
					          <td>$ 72.85</td>
					          <td></td>
					          <td></td>
					          <td>no</td>
					          <td>
					          	<b>Page Size</b>: <span class="Data">8.5"x5.5"</span>
					          	<b class="Label">Page Count</b>: <span class="Data">8 Pages (Cover+4 pages)</span>
					          	<b class="Label">Binding Side</b>: <span class="Data">Left</span>
					          	<b class="Label">Cover Stock</b>: <span class="Data">Same As Inside</span>
					          	<b class="Label">Binding</b>: <span class="Data">Saddle Stitching</span>
					          </td>
					        </tr>
					        <tr>
					          <th scope="row"><input type="checkbox"></th>
					          <td>3jf9729f</td>
					          <td>5/15/16</td>
					          <td>100</td>
					          <td>4/4</td>
					          <td>Brochures</td>
					          <td>8.5"x11.00"</td>
					          <td>$ 72.85</td>
					          <td></td>
					          <td></td>
					          <td>no</td>
					          <td>
					          	<b>Page Size</b>: <span class="Data">8.5"x5.5"</span>
					          	<b class="Label">Page Count</b>: <span class="Data">8 Pages (Cover+4 pages)</span>
					          	<b class="Label">Binding Side</b>: <span class="Data">Left</span>
					          	<b class="Label">Cover Stock</b>: <span class="Data">Same As Inside</span>
					          	<b class="Label">Binding</b>: <span class="Data">Saddle Stitching</span>
					          </td>
					        </tr>
					        <tr>
					          <th scope="row"><input type="checkbox"></th>
					          <td>3jf9729f</td>
					          <td>5/15/16</td>
					          <td>100</td>
					          <td>4/4</td>
					          <td>Brochures</td>
					          <td>8.5"x11.00"</td>
					          <td>$ 72.85</td>
					          <td></td>
					          <td></td>
					          <td>
					          	<b>Page Size</b>: <span class="Data">8.5"x5.5"</span>
					          	<b class="Label">Page Count</b>: <span class="Data">8 Pages (Cover+4 pages)</span>
					          	<b class="Label">Binding Side</b>: <span class="Data">Left</span>
					          	<b class="Label">Cover Stock</b>: <span class="Data">Same As Inside</span>
					          	<b class="Label">Binding</b>: <span class="Data">Saddle Stitching</span>
					          </td>
					        </tr>
					        <tr>
					          <th scope="row"><input type="checkbox"></th>
					          <td>3jf9729f</td>
					          <td>5/15/16</td>
					          <td>100</td>
					          <td>4/4</td>
					          <td>Brochures</td>
					          <td>8.5"x11.00"</td>
					          <td>$ 72.85</td>
					          <td></td>
					          <td></td>
					          <td>
					          	<b>Page Size</b>: <span class="Data">8.5"x5.5"</span>
					          	<b class="Label">Page Count</b>: <span class="Data">8 Pages (Cover+4 pages)</span>
					          	<b class="Label">Binding Side</b>: <span class="Data">Left</span>
					          	<b class="Label">Cover Stock</b>: <span class="Data">Same As Inside</span>
					          	<b class="Label">Binding</b>: <span class="Data">Saddle Stitching</span>
					          </td>
					        </tr>
					      
					      </tbody> </table> </div>
				</div>

			    <div id="aws_files" class="tab-pane" role="tabpanel">
			    	<h2>AWS Files</h2>
			    </div>

			    <div id="pdf_files" class="tab-pane" role="tabpanel">
			    	<h2>PDF Files</h2>
			    </div>
			    
			    <div id="xml_uploads" class="tab-pane" role="tabpanel">
			    	<h2>XML Uploads</h2>
			    </div>
			</div>
		</div>
	</div>		
</section>