<?php 
//------ VIEW - imposition-angular/index.php test 
?>


<script>
	var app = angular.module('imposition', []);

	app.controller('MainController', function($scope, $http) {
	  $scope.message = "GitHub Viewer";
	  $scope.imgWidth = '125';
	  $scope.searchName = '';
	  
	  var onUserComplete = function(response) {
	    console.log(response.data);
	    $scope.user = response.data;
	  };
	  var onError = function(reason) {
	    $scope.errClass = 'alert alert-danger';
	    $scope.error = "ERROR.  Could not fetch the user's results";
	  };

	  $scope.search = function(searchUser){
	    $http.get("https://api.github.com/users/"+searchUser)
	    .then(onUserComplete, onError);
	  }
	  
	  
	});
 
</script>


<div ng-app="imposition">
	<div ng-controller="MainController">
	  <div>
	    <h1>{{message}}</h1>
	    <p class="{{errClass}}">{{error}}</p>
	  
	    <form name="searchUser">
	      <input type="search" class="form-control" placeholder="enter user to find" ng-model="searchName">
	      <input type="submit" value="Search" class="btn btn-success" ng-click="search(searchName)">
	    </form>
	    
	    <table class="table">
	      <tr>
	        <td>Name</td>
	        <td><b>{{user.name}}</b></td>
	      </tr>
	      <tr>
	        <td>Company</td>
	        <td><b>{{user.company}}</b></td>
	      </tr>
	      <tr>
	        <td>Location</td>
	        <td><b>{{user.location}}</b></td>
	      </tr>
	    </table>
	    <img width="{{imgWidth}}" ng-src="{{user.avatar_url}}" title="" />
	  </div>
	</div>
</div>
